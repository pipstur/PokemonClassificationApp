<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Pokémon Predictor</title>
  <style>
    /* CSS styles */
  </style>
</head>
<body>
  <form onsubmit="getClassification(event)">
    <input type="text" id="userInput" placeholder="Enter your text here">
    <button type="submit">Submit</button>
  </form>
  <div>
    <h2>Pokémon Name:</h2>
    <p id="pokemonName">-</p>
    <img src="" id="pokemonImage" width="150" height="150" alt="Pokémon Image">
  
    <h2>Pokémon Description:</h2>
    <p id="pokemonDescription">-</p>
  
    <h2>Reasoning:</h2>
    <p id="reasoning">-</p>
  </div>
  

  <script>
    async function getClassification(event) {
      event.preventDefault();
      const userInput = document.getElementById("userInput").value;

      // Create headers without the Access-Control headers
      const headers = new Headers();
      headers.append('Content-Type', 'application/json');
      headers.append('Accept', 'application/json');

      const response = await fetch("https://pipstur.pythonanywhere.com/get_pokemon_info", {
        method: "POST",
        mode: "cors",
        credentials: "include",  // Or 'same-origin' depending on your needs
        headers: headers,
        body: JSON.stringify({ text: userInput }),
      });

      try {
        const data = await response.json();
        document.getElementById("pokemonName").innerText = data.pokemon_name;
        document.getElementById("pokemonDescription").innerText = data.pokemon_description;
        document.getElementById("reasoning").innerText = data.reasoning;
        document.getElementById("pokemonImage").src = data.pokemon_image_url;
      } catch (error) {
        console.error('There has been a problem with your fetch operation:', error);
      }
    }
  </script>
</body>
</html>
